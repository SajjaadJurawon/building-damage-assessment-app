<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building Damage Assessment</title>

    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="favicon/favicon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/favicon.png">
    <link rel="shortcut icon" href="favicon/favicon.ico">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: radial-gradient(1200px 600px at 50% -200px, #0f172a 0%, #05070a 55%);
            min-height: 100vh;
            padding: 20px;
        }
/* --- HERO SECTION --- */
        .hero{
        position: relative;
        min-height: 72vh;
        border-radius: 22px;
        overflow: hidden;
        margin: 0 auto 24px;
        max-width: 1400px;

        /* Background image + dark overlay */
        background:
            linear-gradient(180deg, rgba(0,0,0,0.70) 0%, rgba(0,0,0,0.65) 45%, rgba(0,0,0,0.78) 100%),
            url("/assets/hero-bg.jpg");
        background-size: cover;
        background-position: center;
        box-shadow: 0 20px 60px rgba(0,0,0,0.35);
        }

        .hero::after{
        content:"";
        position:absolute;
        inset:0;
        background:
            radial-gradient(1200px 600px at 50% 70%, rgba(23,198,195,0.12), transparent 60%),
            radial-gradient(900px 420px at 20% 30%, rgba(255,255,255,0.06), transparent 55%);
        pointer-events:none;
        }

        .nav{
        position: relative;
        z-index: 2;
        display:flex;
        align-items:center;
        justify-content:space-between;
        padding: 18px 26px;
        margin: 18px;
        border-radius: 16px;
        background: rgba(0,0,0,0.35);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255,255,255,0.12);
        }

        .brand{
        display:flex;
        align-items:center;
        gap: 10px;
        font-weight: 800;
        color: rgba(255,255,255,0.92);
        }

        .brand-mark{
        width: 34px;
        height: 34px;
        display:grid;
        place-items:center;
        border-radius: 10px;
        background: rgba(23,198,195,0.18);
        border: 1px solid rgba(23,198,195,0.35);
        color: #17c6c3;
        }

        .brand-accent{ color: #17c6c3; }

        .nav-links{
        display:flex;
        gap: 22px;
        }

        .nav-links a{
        color: rgba(255,255,255,0.78);
        text-decoration:none;
        font-weight: 500;
        }

        .nav-links a:hover{ color: rgba(255,255,255,0.92); }

        .nav-cta{
        text-decoration:none;
        color: #001114;
        background: #17c6c3;
        padding: 10px 16px;
        border-radius: 999px;
        font-weight: 800;
        }

        .hero-inner{
        position: relative;
        z-index: 2;
        max-width: 980px;
        margin: 0 auto;
        padding: 72px 26px 92px;
        text-align: center;
        color: rgba(255,255,255,0.92);
        }

        .pill{
        display:inline-flex;
        align-items:center;
        gap: 10px;
        color: rgba(255,255,255,0.86);
        background: rgba(0,0,0,0.35);
        border: 1px solid rgba(23,198,195,0.35);
        border-radius: 999px;
        padding: 10px 16px;
        backdrop-filter: blur(10px);
        margin-bottom: 26px;
        }

        .hero-title{
        font-size: clamp(38px, 5vw, 74px);
        line-height: 1.05;
        letter-spacing: -0.02em;
        margin-bottom: 18px;
        }

        .hero-subtitle{
        color: rgba(255,255,255,0.72);
        max-width: 820px;
        margin: 0 auto 34px;
        font-size: 18px;
        line-height: 1.6;
        }

        .accent{ color: #17c6c3; }

        .hero-actions{
        display:flex;
        justify-content:center;
        gap: 14px;
        flex-wrap: wrap;
        }

        .btn-primary, .btn-secondary{
        text-decoration:none;
        padding: 14px 22px;
        border-radius: 999px;
        font-weight: 800;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        min-width: 190px;
        }

        .btn-primary{
        background: #17c6c3;
        color: #001114;
        box-shadow: 0 10px 22px rgba(23,198,195,0.22);
        }

        .btn-secondary{
        background: rgba(0,0,0,0.35);
        color: rgba(255,255,255,0.92);
        border: 1px solid rgba(255,255,255,0.14);
        backdrop-filter: blur(10px);
        }

        @media (max-width: 820px){
        .nav-links{ display:none; }
        }

        .section{
            max-width: 1400px;
            margin: 0 auto 26px;
            border-radius: 22px;
            padding: 70px 26px;
            background: rgba(0,0,0,0.35);
            border: 1px solid rgba(255,255,255,0.10);
            backdrop-filter: blur(12px);
            box-shadow: 0 20px 60px rgba(0,0,0,0.25);
        }

        .section-inner{
            max-width: 980px;
            margin: 0 auto;
            text-align: center;
            color: rgba(255,255,255,0.92);
        }

        .section-title{
            font-size: clamp(30px, 4vw, 52px);
            margin-bottom: 18px;
        }

        .section-text{
            color: rgba(255,255,255,0.70);
            line-height: 1.7;
            font-size: 16px;
            margin: 0 auto 34px;
            max-width: 860px;
        }
        
        .about-grid{
            margin-top: 34px;
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 18px;
        }

        .about-card{
            text-align: left;
            border-radius: 18px;
            padding: 22px;
            background: rgba(0,0,0,0.38);
            border: 1px solid rgba(255,255,255,0.10);
            box-shadow: 0 20px 60px rgba(0,0,0,0.18);
        }

        .about-icon{
            width: 42px;
            height: 42px;
            border-radius: 12px;
            display: grid;
            place-items: center;
            background: rgba(23,198,195,0.16);
            border: 1px solid rgba(23,198,195,0.35);
            color: #17c6c3;
            font-size: 18px;
            margin-bottom: 14px;
        }

        .about-card h3{
            margin: 0 0 8px;
            font-size: 16px;
            color: rgba(255,255,255,0.92);
            font-weight: 800;
        }

        .about-card p{
            margin: 0;
            color: rgba(255,255,255,0.65);
            line-height: 1.6;
            font-size: 13px;
        }

        .subhead{
            margin-top: 42px;
            font-size: 18px;
            font-weight: 900;
            color: rgba(255,255,255,0.92);
        }

        .category-grid{
            margin-top: 18px;
            display: grid;
            grid-template-columns: repeat(4, minmax(0, 1fr));
            gap: 14px;
        }

        .category-card{
            border-radius: 16px;
            padding: 18px;
            background: rgba(0,0,0,0.38);
            border: 1px solid rgba(255,255,255,0.10);
            text-align: center;
        }

        .pill-tag{
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 6px 12px;
            border-radius: 999px;
            font-weight: 800;
            font-size: 12px;
            margin-bottom: 10px;
            border: 1px solid rgba(255,255,255,0.10);
        }

        .pill-green{ background: rgba(40,167,69,0.18); color: #5fe07f; border-color: rgba(40,167,69,0.35); }
        .pill-yellow{ background: rgba(255,193,7,0.18); color: #ffd466; border-color: rgba(255,193,7,0.35); }
        .pill-orange{ background: rgba(253,126,20,0.18); color: #ffb075; border-color: rgba(253,126,20,0.35); }
        .pill-red{ background: rgba(220,53,69,0.18); color: #ff7b87; border-color: rgba(220,53,69,0.35); }

        .category-value{
            font-size: 22px;
            font-weight: 900;
            color: rgba(255,255,255,0.92);
            margin-bottom: 2px;
        }

        .category-label{
            font-size: 12px;
            color: rgba(255,255,255,0.55);
        }

        @media (max-width: 900px){
            .about-grid{ grid-template-columns: 1fr; }
            .category-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
        }

        @media (max-width: 520px){
            .category-grid{ grid-template-columns: 1fr; }
        }

        .metrics{
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 18px;
            margin-top: 30px;
        }

        .metric-card{
            border-radius: 16px;
            padding: 22px;
            background: rgba(0,0,0,0.35);
            border: 1px solid rgba(255,255,255,0.10);
        }

        .metric-value{
            font-size: 32px;
            font-weight: 900;
            margin-bottom: 6px;
        }

        .metric-label{
            color: rgba(255,255,255,0.65);
            font-size: 13px;
        }

        @media (max-width: 900px){
            .metrics{ grid-template-columns: 1fr; }
        }

        .how-section .section-inner{
            max-width: 1100px;
        }

        .how-flow{
            margin-top: 28px;
            display: grid;
            grid-template-columns: 1fr 30px 1fr 30px 1fr 30px 1fr;
            gap: 14px;
            align-items: stretch;
        }

        .how-step{
            text-align: left;
            border-radius: 18px;
            padding: 22px;
            background: rgba(0,0,0,0.38);
            border: 1px solid rgba(255,255,255,0.10);
            box-shadow: 0 20px 60px rgba(0,0,0,0.18);
            position: relative;
            overflow: hidden;
        }

        .how-top{
            display:flex;
            align-items:center;
            justify-content:space-between;
            margin-bottom: 14px;
        }

        .how-icon{
            width: 42px;
            height: 42px;
            border-radius: 12px;
            display: grid;
            place-items: center;
            background: rgba(23,198,195,0.16);
            border: 1px solid rgba(23,198,195,0.35);
            color: #17c6c3;
            font-size: 18px;
        }

        .how-num{
            font-weight: 900;
            font-size: 44px;
            letter-spacing: -0.02em;
            color: rgba(23,198,195,0.12);
        }

        .how-step h3{
            margin: 0 0 8px;
            font-size: 16px;
            color: rgba(255,255,255,0.92);
            font-weight: 900;
        }

        .how-step p{
            margin: 0;
            color: rgba(255,255,255,0.65);
            line-height: 1.6;
            font-size: 13px;
        }

        .how-line{
            align-self: center;
            height: 2px;
            background: rgba(23,198,195,0.22);
            border-radius: 999px;
        }

        @media (max-width: 1000px){
            .how-flow{
                grid-template-columns: 1fr;
            }
            .how-line{
                display: none;
            }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .upload-section {
            background: rgba(0,0,0,0.35);
            border: 2px dashed rgba(23,198,195,0.45);
            color: rgba(255,255,255,0.9);
        }

        .upload-section:hover {
            background: rgba(0,0,0,0.45);
            border-color: rgba(23,198,195,0.7);
        }

        .upload-section.dragging {
            background: rgba(23,198,195,0.12);
            border-color: #17c6c3;
        }

        /* Text inside upload section */
        .upload-section .upload-text {
            color: rgba(255,255,255,0.9);
        }

        .upload-section .upload-hint {
            color: rgba(255,255,255,0.55);
        }

        #fileInput {
            display: none;
        }

        .upload-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .upload-text {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 10px;
        }

        .upload-hint {
            color: #666;
            font-size: 0.9em;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 20px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results {
            display: none;
            margin-top: 30px;
        }

        .image-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .image-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .image-container h3 {
            margin-bottom: 15px;
            color: #333;
        }

        .image-container img {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border-left: 5px solid #667eea;
        }

        .card-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .card-label {
            color: #666;
            font-size: 0.9em;
        }

        .damage-breakdown {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .damage-breakdown h3 {
            margin-bottom: 20px;
            color: #333;
        }

        .damage-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: white;
            margin-bottom: 10px;
            border-radius: 10px;
            border-left: 5px solid;
        }

        .damage-item.no-damage { border-left-color: #28a745; }
        .damage-item.minor-damage { border-left-color: #ffc107; }
        .damage-item.major-damage { border-left-color: #fd7e14; }
        .damage-item.destroyed { border-left-color: #dc3545; }

        .damage-bar {
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            flex-grow: 1;
            margin: 0 15px;
        }

        .damage-bar-fill {
            height: 100%;
            transition: width 0.5s;
        }

        .buildings-list {
            max-height: 400px;
            overflow-y: auto;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
        }

        .building-card {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            border-left: 5px solid;
        }

        .building-card.no-damage { border-left-color: #28a745; }
        .building-card.minor-damage { border-left-color: #ffc107; }
        .building-card.major-damage { border-left-color: #fd7e14; }
        .building-card.destroyed { border-left-color: #dc3545; }

        .error {
            display: none;
            background: #f8d7da;
            color: #721c24;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            .image-comparison {
                grid-template-columns: 1fr;
            }
        }

        .try-section {
            padding-bottom: 0;
        }

        .try-shell {
            margin-top: 26px;
            max-width: 720px;
            margin-left: auto;
            margin-right: auto;
            border-radius: 18px;
            padding: 18px;
            background: rgba(0,0,0,0.35);
            border: 1px solid rgba(255,255,255,0.10);
            backdrop-filter: blur(12px);
            box-shadow: 0 20px 60px rgba(0,0,0,0.25);
        }

        .try-drop {
            border-radius: 16px;
            padding: 42px 22px;
            background: rgba(0,0,0,0.28);
            border: 1px dashed rgba(255,255,255,0.20);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .try-drop:hover {
            transform: translateY(-1px);
            border-color: rgba(23,198,195,0.45);
            background: rgba(0,0,0,0.35);
        }

        .try-drop.dragging {
            border-color: rgba(23,198,195,0.65);
            background: rgba(23,198,195,0.08);
        }

        .try-icon {
            width: 56px;
            height: 56px;
            border-radius: 999px;
            margin: 0 auto 14px;
            display: grid;
            place-items: center;
            background: rgba(23,198,195,0.16);
            border: 1px solid rgba(23,198,195,0.35);
            color: #17c6c3;
            font-size: 20px;
        }

        .try-title {
            text-align: center;
            font-weight: 900;
            color: rgba(255,255,255,0.92);
            font-size: 16px;
            margin-bottom: 6px;
        }

        .try-sub {
            text-align: center;
            color: rgba(255,255,255,0.70);
            font-size: 13px;
            line-height: 1.6;
        }

        .try-hint {
            text-align: center;
            color: rgba(255,255,255,0.45);
            font-size: 12px;
            margin-top: 10px;
        }

        .try-note {
            margin-top: 18px;
            text-align: center;
            color: rgba(255,255,255,0.55);
            font-size: 12px;
        }

        .sample-images {
            margin-top: 22px;
            text-align: center;
        }

        .sample-title {
            color: rgba(255,255,255,0.65);
            font-size: 13px;
            margin-bottom: 12px;
        }

        .sample-grid {
            display: flex;
            gap: 14px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .sample-img {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 12px;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.15);
            opacity: 0.9;
            transition: all 0.2s ease;
        }

        .sample-img:hover {
            opacity: 1;
            transform: translateY(-2px);
            border-color: #17c6c3;
        }

        .sample-images {
            margin-top: 24px;
            text-align: center;
        }

        .sample-title {
            color: rgba(255,255,255,0.6);
            font-size: 13px;
            margin-bottom: 12px;
        }

        .sample-grid {
            display: flex;
            gap: 14px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .sample-img {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 12px;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.15);
            opacity: 0.9;
            transition: all 0.2s ease;
        }

        .sample-img:hover {
            opacity: 1;
            transform: translateY(-2px);
            border-color: #17c6c3;
        }


        /* ========================= */
        /* LOADING + ERROR           */
        /* ========================= */

        .loading p {
            color: rgba(255,255,255,0.75);
        }

        .spinner {
            border-color: rgba(255,255,255,0.2);
            border-top-color: #17c6c3;
        }

        .error {
            background: rgba(220,53,69,0.18);
            color: #ff9aa4;
        }

            /* ========================= */
            /* RESULTS ‚Äì DARK OVERRIDES  */
            /* ========================= */

        .results {
            background: transparent;
        }

        .image-container {
            background: rgba(0,0,0,0.35);
            border: 1px solid rgba(255,255,255,0.10);
        }

        .image-container h3 {
            color: rgba(255,255,255,0.9);
        }

        .image-container img {
            background: #000;
        }

            /* Summary cards */
            .card {
            background: rgba(0,0,0,0.35);
            border-left: 4px solid #17c6c3;
            }

            .card-value {
            color: #17c6c3;
            }

            .card-label {
            color: rgba(255,255,255,0.6);
            }

            /* Damage breakdown */
            .damage-breakdown {
            background: rgba(0,0,0,0.35);
            border: 1px solid rgba(255,255,255,0.10);
            }

            .damage-breakdown h3 {
            color: rgba(255,255,255,0.9);
            }

            .damage-item {
            background: rgba(0,0,0,0.45);
            color: rgba(255,255,255,0.85);
            }

            /* Buildings list */
            .buildings-list {
            background: rgba(0,0,0,0.35);
            border: 1px solid rgba(255,255,255,0.10);
            }

            .building-card {
            background: rgba(0,0,0,0.45);
            color: rgba(255,255,255,0.85);
            }

            /* ========================= */
            /* FOOTER                    */
            /* ========================= */

            .footer {
            margin-top: 54px;
            padding: 22px 26px;
            display: flex;
            gap: 18px;
            align-items: center;
            justify-content: space-between;
            border-top: 1px solid rgba(255,255,255,0.08);
            background: rgba(0,0,0,0.25);
            }

            .footer a {
            color: rgba(255,255,255,0.70);
            text-decoration: none;
            font-size: 13px;
            }

            .footer a:hover {
            color: rgba(255,255,255,0.92);
            }

            .footer-links {
            display: flex;
            gap: 20px;
            align-items: center;
            }

            .footer-brand {
            color: rgba(255,255,255,0.92);
            font-weight: 900;
            font-size: 14px;
            }

            .footer-right {
            color: rgba(255,255,255,0.55);
            font-size: 12px;
            }

            @media (max-width: 900px) {
            .footer {
                flex-direction: column;
                text-align: center;
            }
            }

        /* Override Analyze Another Image button */
        .results .btn {
            background: #17c6c3;
            color: #001114;
            border: none;
            border-radius: 999px;
            padding: 14px 28px;
            font-weight: 800;
            box-shadow: 0 10px 22px rgba(23,198,195,0.25);
        }

        .results .btn:hover {
            background: #1fdedb;
            transform: translateY(-1px);
        }

        /* =============================== */
        /* ANALYZE IMAGE ‚Äì NEON GREEN CTA */
        /* =============================== */

        #uploadBtn {
            background: #39ff14;              /* neon green */
            color: #001400;
            border: none;
            border-radius: 999px;
            padding: 14px 32px;
            font-weight: 900;
            font-size: 15px;
            letter-spacing: 0.3px;
            box-shadow:
                0 0 12px rgba(57,255,20,0.45),
                0 0 28px rgba(57,255,20,0.25);
            transition: all 0.25s ease;
        }

        #uploadBtn:hover {
            background: #5cff3a;
            transform: translateY(-1px) scale(1.02);
            box-shadow:
                0 0 16px rgba(57,255,20,0.7),
                0 0 40px rgba(57,255,20,0.45);
        }

        #uploadBtn:active {
            transform: scale(0.98);
            box-shadow:
                0 0 8px rgba(57,255,20,0.5);
        }

    </style>
</head>

<body>
    <header class="hero">
        <nav class="nav">
            <div class="brand">
                <div class="brand-mark">‚¨°</div>
                <span class="brand-name">
                    DamageVision<span class="brand-accent">AI</span>
                </span>
            </div>

            <div class="nav-links">
                <a href="#about">About</a>
                <a href="#how">How It Works</a>
                <a href="#report">Report</a>
            </div>

            <a class="nav-cta" href="#try">Try It Now</a>
        </nav>

        <div class="hero-inner">
            <div class="pill">‚ö° Deep Learning Powered</div>

            <h1 class="hero-title">
                Building Damage Assessment from<br />
                <span class="accent">Satellite Imagery</span>
            </h1>

            <p class="hero-subtitle">
                Leveraging YOLOv8 and EfficientNet-B3 to automatically detect buildings
                and classify post-disaster damage severity.
            </p>

            <div class="hero-actions">
                <a class="btn-primary" href="#try">Analyze Your Image</a>
                <a class="btn-secondary"
                    href="/report/building-damage-report.pdf"
                    target="_blank"
                    rel="noopener">
                    Read Full Report
                </a>
            </div>
        </div>
    </header>

    <!-- ABOUT SECTION -->
    <section id="about" class="section">
    <div class="section-inner">
        <h2 class="section-title">About the <span class="accent">Project</span></h2>
        <p class="section-text">
        This research develops and evaluates a two-stage deep learning pipeline that combines
        object detection for building localisation with classification models for damage severity
        predictions. The increasing frequency of natural disasters due to climate change
        necessitates automated systems for rapid damage assessment to support disaster response efforts.
        </p>

        <!-- ABOUT CARDS GRID -->
        <div class="about-grid">
        <div class="about-card">
            <div class="about-icon">üß†</div>
            <h3>Deep Learning Pipeline</h3>
            <p>
            A sophisticated two-stage architecture combining state-of-the-art object detection with image classification.
            </p>
        </div>

        <div class="about-card">
            <div class="about-icon">üó∫Ô∏è</div>
            <h3>YOLOv8 Detection</h3>
            <p>
            Fast and accurate building localization using YOLOv8s, outperforming Faster R-CNN and FCOS on the xBD dataset.
            </p>
        </div>

        <div class="about-card">
            <div class="about-icon">‚öôÔ∏è</div>
            <h3>EfficientNet-B3</h3>
            <p>
            Transfer learning with progressive fine-tuning achieves 87.8% test accuracy on damage classification.
            </p>
        </div>

        <div class="about-card">
            <div class="about-icon">üõ∞Ô∏è</div>
            <h3>xBD Dataset</h3>
            <p>
            Trained and validated on the xBD benchmark, one of the largest satellite imagery datasets for disaster assessment.
            </p>
        </div>
        </div>

        <!-- DAMAGE CATEGORIES -->
        <h3 class="subhead">Damage Classification Categories</h3>

        <div class="category-grid">
        <div class="category-card">
            <span class="pill-tag pill-green">No Damage</span>
            <div class="category-value">0.887</div>
            <div class="category-label">F1 Score</div>
        </div>

        <div class="category-card">
            <span class="pill-tag pill-yellow">Minor</span>
            <div class="category-value">0.214</div>
            <div class="category-label">F1 Score</div>
        </div>

        <div class="category-card">
            <span class="pill-tag pill-orange">Major</span>
            <div class="category-value">0.143</div>
            <div class="category-label">F1 Score</div>
        </div>

        <div class="category-card">
            <span class="pill-tag pill-red">Destroyed</span>
            <div class="category-value">0.723</div>
            <div class="category-label">F1 Score</div>
        </div>
        </div>

        <h3 class="subhead">Pipeline Performance</h3>
        <div class="metrics">
        <div class="metric-card">
            <div class="metric-value">87.8%</div>
            <div class="metric-label">Classification Accuracy</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">1.28s</div>
            <div class="metric-label">Per Image Processing</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">0.503</div>
            <div class="metric-label">End-to-End F1 Score</div>
        </div>
        </div>
    </div>
    </section>

    <section id="report" class="section">
        <div class="section-inner">
            <h2 class="section-title">Full <span class="accent">Report</span></h2>
            <p class="section-text">
            Detailed methodology, experiments, ablation studies, and evaluation metrics.
            </p>

            <a class="btn-primary"
            href="/report/building-damage-report.pdf"
            target="_blank"
            rel="noopener">
            Open Report PDF
            </a>
        </div>
    </section>

    <!-- HOW IT WORKS -->
    <section id="how" class="section how-section">
    <div class="section-inner">
        <h2 class="section-title">How It <span class="accent">Works</span></h2>
        <p class="section-text">
        Our two-stage pipeline processes satellite imagery through building detection
        and damage classification for comprehensive damage assessment.
        </p>

        <div class="how-flow">
        <div class="how-step">
            <div class="how-top">
            <div class="how-icon">‚¨ÜÔ∏è</div>
            <div class="how-num">01</div>
            </div>
            <h3>Upload Image</h3>
            <p>Upload a post-disaster satellite image in common formats (JPEG, PNG, TIFF).</p>
        </div>

        <div class="how-line" aria-hidden="true"></div>

        <div class="how-step">
            <div class="how-top">
            <div class="how-icon">üß≠</div>
            <div class="how-num">02</div>
            </div>
            <h3>Building Detection</h3>
            <p>YOLOv8 identifies and localizes all buildings with bounding boxes.</p>
        </div>

        <div class="how-line" aria-hidden="true"></div>

        <div class="how-step">
            <div class="how-top">
            <div class="how-icon">üß†</div>
            <div class="how-num">03</div>
            </div>
            <h3>Damage Classification</h3>
            <p>EfficientNet-B3 classifies each detected building into a damage severity level.</p>
        </div>

        <div class="how-line" aria-hidden="true"></div>

        <div class="how-step">
            <div class="how-top">
            <div class="how-icon">üìä</div>
            <div class="how-num">04</div>
            </div>
            <h3>Results</h3>
            <p>Receive an annotated image with color-coded damage levels and a detailed report.</p>
        </div>
        </div>
    </div>
    </section>

  <p>Receive an annotated image with color-coded damage levels and a detailed report.</p>
        </div>
        </div>
    </div>
    </section>

<!-- TRY THE MODEL -->
<section id="try" class="section try-section">
  <div class="section-inner">
    <h2 class="section-title">Try the <span class="accent">Model</span></h2>
    <p class="section-text">
      Upload a satellite image to see building damage assessment in action.
      The model will detect buildings and classify damage severity.
    </p>

    <!-- Upload UI -->
    <div class="try-shell">
      <div class="try-drop" id="uploadSection" onclick="document.getElementById('fileInput').click()">
        <div class="try-icon">‚¨ÜÔ∏è</div>
        <div class="try-title">Upload Satellite Image</div>
        <div class="try-sub">Drag and drop your image here, or click to browse</div>
        <div class="try-hint">Supports: JPEG, PNG, TIFF (max 50MB)</div>

        <input type="file" id="fileInput" accept=".tif,.tiff,.png,.jpg,.jpeg">
        <button class="btn" id="uploadBtn" style="display:none;">Analyze Image</button>
      </div>
    </div>

    <div class="sample-images">
        <p class="sample-title">Or try a sample image:</p>

        <div class="sample-grid">
            <img
            src="/samples/preview_1.png"
            data-file="/samples/hurricane_harvey.tif"
            class="sample-img"
            alt="Sample damage image 1">

            <img
            src="/samples/preview_2.png"
            data-file="/samples/palu_tsunami.tif"
            class="sample-img"
            alt="Sample damage image 2">

            <img
            src="/samples/preview_3.png"
            data-file="/samples/santarosa_wildfire.tif"
            class="sample-img"
            alt="Sample damage image 3">
        </div>
    </div>

    <div class="try-note">
      For best results, use high-resolution post-disaster satellite imagery (0.5m GSD or better).
    </div>

    <!-- Loading / Error -->
    <div class="loading" id="loading">
      <div class="spinner"></div>
      <p>Analyzing image... This may take a few moments</p>
    </div>

    <div class="error" id="error"></div>

    <!-- RESULTS (same output as old version) -->
    <div class="results" id="results">
      <h2 style="margin-bottom: 20px;">Analysis Results</h2>

      <div class="image-comparison">
        <div class="image-container">
          <h3>Original Image</h3>
          <img id="originalImage" src="" alt="Original">
        </div>

        <div class="image-container">
          <h3>Detection & Classification Results</h3>
          <img id="visualizationImage" src="" alt="Results">

          <div class="legend">
            <div class="legend-item">
              <div class="legend-color" style="background: #28a745;"></div>
              <span>No Damage</span>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background: #ffc107;"></div>
              <span>Minor Damage</span>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background: #fd7e14;"></div>
              <span>Major Damage</span>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background: #dc3545;"></div>
              <span>Destroyed</span>
            </div>
          </div>
        </div>
      </div>

      <div class="summary-cards">
        <div class="card">
          <div class="card-value" id="totalBuildings">0</div>
          <div class="card-label">Buildings Detected</div>
        </div>
        <div class="card">
          <div class="card-value" id="noDamage">0</div>
          <div class="card-label">No Damage</div>
        </div>
        <div class="card">
          <div class="card-value" id="minorDamage">0</div>
          <div class="card-label">Minor Damage</div>
        </div>
        <div class="card">
          <div class="card-value" id="majorDamage">0</div>
          <div class="card-label">Major Damage</div>
        </div>
        <div class="card">
          <div class="card-value" id="destroyed">0</div>
          <div class="card-label">Destroyed</div>
        </div>
      </div>

      <div class="damage-breakdown">
        <h3>Damage Distribution</h3>
        <div id="damageBreakdown"></div>
      </div>

      <div class="buildings-list">
        <h3 style="margin-bottom: 15px;">Individual Buildings</h3>
        <div id="buildingsList"></div>
      </div>

      <button class="btn" onclick="location.reload()">Analyze Another Image</button>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="footer-left">
      <span class="footer-brand">DamageVision<span class="brand-accent">AI</span></span>
    </div>

    <div class="footer-links">
      <a href="/report/building-damage-report.pdf" target="_blank" rel="noopener">Full Report</a>
      <!-- Replace # with your actual GitHub URL -->
      <a href="https://github.com/SajjaadJurawon/Projects/tree/main/Building%20Damage%20Assessment" target="_blank" rel="noopener">GitHub</a>
      <!-- Replace mailto with your email if you want -->
      <a href="mailto:sajjaad.jurawon@gmail.com">Contact</a>
    </div>

    <div class="footer-right">
      ¬© 2026 Sajjaad Jurawon. MSc Data Science Project.
    </div>
  </footer>
</section>

<script>
  const API_URL = '/predict-with-image';
  let selectedFile = null;

  const uploadSection = document.getElementById('uploadSection'); // .try-drop
  const fileInput = document.getElementById('fileInput');
  const uploadBtn = document.getElementById('uploadBtn');
  const loading = document.getElementById('loading');
  const error = document.getElementById('error');
  const results = document.getElementById('results');

  function setSelectedFile(file) {
    selectedFile = file;
    if (selectedFile) {
      // Update label in the new UI
      const titleEl = uploadSection.querySelector('.try-title');
      if (titleEl) titleEl.textContent = selectedFile.name;

      uploadBtn.style.display = 'inline-block';
      uploadBtn.onclick = (e) => {
        e.stopPropagation();
        uploadAndAnalyze();
    };
    }
  }

  fileInput.addEventListener('change', (e) => {
    setSelectedFile(e.target.files[0]);
  });

  uploadSection.addEventListener('dragover', (e) => {
    e.preventDefault();
    uploadSection.classList.add('dragging');
  });

  uploadSection.addEventListener('dragleave', () => {
    uploadSection.classList.remove('dragging');
  });

  uploadSection.addEventListener('drop', (e) => {
    e.preventDefault();
    uploadSection.classList.remove('dragging');
    setSelectedFile(e.dataTransfer.files[0]);
  });

  async function uploadAndAnalyze() {
    if (!selectedFile) return;

    uploadSection.style.display = 'none';
    loading.style.display = 'block';
    error.style.display = 'none';
    results.style.display = 'none';

    const formData = new FormData();
    formData.append('file', selectedFile);

    try {
      const response = await fetch(API_URL, {
        method: 'POST',
        body: formData
      });

      if (!response.ok) {
        throw new Error(`API error: ${response.status}`);
      }

      const data = await response.json();
      displayResults(data);
    } catch (err) {
      showError(`Error: ${err.message}`);
    } finally {
      loading.style.display = 'none';
    }
  }

  // Sample image click handlers
    document.querySelectorAll('.sample-img').forEach(img => {
        img.addEventListener('click', async (e) => {
            const samplePath = e.target.dataset.file;
            
            try {
            // Fetch the sample image
            const response = await fetch(samplePath);
            const blob = await response.blob();
            
            // Create a File object from the blob
            const fileName = samplePath.split('/').pop();
            const file = new File([blob], fileName, { type: blob.type });
            
            // Use the existing setSelectedFile function
            setSelectedFile(file);
            
            // Optionally scroll to the upload section
            uploadSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
            } catch (err) {
            showError(`Failed to load sample image: ${err.message}`);
            }
        });
    });

  function displayResults(data) {
    // images
    document.getElementById('originalImage').src = data.images.original;
    document.getElementById('visualizationImage').src = data.images.visualization;

    // summary counts
    document.getElementById('totalBuildings').textContent = data.metadata.total_buildings;
    document.getElementById('noDamage').textContent = data.damage_summary.counts['no-damage'];
    document.getElementById('minorDamage').textContent = data.damage_summary.counts['minor-damage'];
    document.getElementById('majorDamage').textContent = data.damage_summary.counts['major-damage'];
    document.getElementById('destroyed').textContent = data.damage_summary.counts['destroyed'];

    // breakdown bars
    const breakdownHTML = ['no-damage', 'minor-damage', 'major-damage', 'destroyed'].map(type => {
      const count = data.damage_summary.counts[type];
      const percentage = data.damage_summary.percentages[type];
      const colors = {
        'no-damage': '#28a745',
        'minor-damage': '#ffc107',
        'major-damage': '#fd7e14',
        'destroyed': '#dc3545'
      };

      return `
        <div class="damage-item ${type}">
          <strong>${type.replace('-', ' ').toUpperCase()}</strong>
          <div class="damage-bar">
            <div class="damage-bar-fill" style="width: ${percentage}%; background: ${colors[type]}"></div>
          </div>
          <span>${count} (${percentage.toFixed(1)}%)</span>
        </div>
      `;
    }).join('');

    document.getElementById('damageBreakdown').innerHTML = breakdownHTML;

    // buildings list
    const buildingsHTML = data.buildings.map((building, idx) => `
      <div class="building-card ${building.damage_assessment.class}">
        <strong>Building #${idx + 1}</strong> -
        ${building.damage_assessment.class.replace('-', ' ').toUpperCase()}
        (${(building.damage_assessment.confidence * 100).toFixed(1)}% confidence)
        <br>
        <small>Location: (${building.bbox.x1}, ${building.bbox.y1}) - Area: ${building.area} pixels</small>
      </div>
    `).join('');

    document.getElementById('buildingsList').innerHTML = buildingsHTML;

    results.style.display = 'block';
  }

  function showError(message) {
    error.textContent = message;
    error.style.display = 'block';
    uploadSection.style.display = 'block';
  }
</script>
</body>
</html>
